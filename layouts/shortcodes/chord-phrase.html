<script type = "text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.5.1/snap.svg-min.js"></script>
<style>
    :root{
        --palm: #ffb6b6ff;
    }
</style>
<h5>Click to load a pangram</h5>
<ul id="panagrams">
   <li >void (^a)(void) => <- /^\!*@#$%&?/ void () {printf("test");};</li>
   <li >Waltz, bad nymph, for quick jigs vex.</li>
   <li >Sphinx of black quartz, judge my vow.</li>
   <li >List.map(fun i -> i + 1)[1;2;3]</li>
   <li >var xyzOrds => (q){q % 2 || !^~ ? "c++"} </li>
   <li >
        <pre>($($type:ty),+ $(,)? ) => {
    $( write_schema_for!("response", app_json::response::Response<$type>); )+
};

        </pre>
    </li>
</ul>
<form id="chordifyForm" action="javascript:chordify();">
    <textarea type="text" id="phrase" style="width: 100%; height: 70px;"></textarea>

    <button id="chordify" class="btn btn-primary btn-xs" type="submit">Chordify</button>
    <button id="resetChordify" class="btn btn-secondary btn-xs" type="submit">Reset</button>
</form>
<details class="row ">
    <summary class="row col-sm-12">Chord Syntax Legend</summary>
    <pre id="legend" class="bold col-sm-3">
t = thumb
i = index
m = middle
r = ring
p = pinky

mf = metacarpo-flexion
pf = proximal-flexion
me = metacarpo-extension

Modifiers:
tmf = Shift
tpf = Ctrl
tmf_tpf = Alt
    </pre>
    <pre id="hex-chords" class="bold col-sm-3">
hexcode, finger, action
0x0, thumb, mf
0x1, thumb, pf
0x2, thumb, me
0x3, index, mf
0x4, index, pf
0x5, index, me
0x6, middle, mf
0x7, middle, pf
0x8, middle, me
0x9, ring, mf
0xA, ring, pf
0xB, ring, me
0xC, pinky, mf
0xD, pinky, pf
0xE, pinky, me
    </pre>
</details>
<div id="chord-area" class="row col-md-12">
    <h6>Chord strokes</h6>
    <div class="row col-md-12" style="max-width: 100%">
        <pre id="chordified" hidden class="col-md-6 bold chordified" ></pre>
        <div class="col-md-4 ">
            <pre id="svgCharacter" hidden ></pre>
            <div id="chord-image-holder" style="float: left;">
                <!-- <svg width="300" height="300" transform="rotate(-90) traslate(20,20) scale(1.5,1.5)">
                    <use id="chord-image" href="#chord-phrase-hand"  ></use>
                </svg> -->
            </div>
        </div>
    </div>
    <div id="testAreaDiv" class="col-md-12" >
        <div style="width: 100%" class="row">
            <div id="test-timer" style="padding-left: 0; width: 60%; float: left; font-family: monospace; font-size: 16px">
                <span id="status">
                    <svg id="timerSvg" width="20" height="20">
                        <use href="#start" transform="scale(2,2)" >

                        </use>
                    </svg>
                </span>
                <b>
                    <span id="timer">0.0</span>
                </b> seconds
            </div>
            <button id="listAllChords" class="btn btn-secondary btn-xs" style="width: 20%; float: right;">List chords</button>
            <button id="timerCancel" class="btn btn-secondary btn-xs" style="width: 20%; float: right;">Reset</button>
        </div>
        <div class="row">
            <textarea id="testArea" style="min-width: 80%" title="test chord"></textarea>
        </div>
    </div>
    
    <div display="block" id="chordList" class="col-sm-12" style="max-width: 100%">
        <!-- <input id="searchChords" class="col-sm-4" style="max-width: 100%"/> -->
        <!-- <button id="clearChordsButton" class="col-sm-2 btn btn-secondary btn-xs" >Reset</button> -->
        <div id="wholePhraseChords" class="row col-sm-12 row chordified" style="max-width: 100%">
        </div>
    </div>  
</div>
<script src="/js/chord-phrase.js" type="text/javascript">
</script>
<svg id="chord-hand" 
    viewBox="0 0 63 50"
    display="none"
    width="630" height="500"
    xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano">
    <style>
        #hand g use {
            stroke: #aa6e02 ;
            stroke-width: 0.1px;
        }
        #thumb {
            fill: url("#thumbGradient");
        }
        #index {
            fill: #ffb6b6ff;
        }
        #middle {
            fill: #ffb6b6ff;
        }
        #ring {
            fill: #ffb6b6ff;
        }
        #pinky {
            fill: #ffb6b6ff;
        }
    </style>
    <defs>
        <linearGradient id="thumbGradient" x1="1" x2="1" y1="0" y2="1" >
            <stop offset="0%" stop-color="#ffb6b6ff" />
            <stop offset="100%" stop-color="#BD7676" />
        </linearGradient>
        <linearGradient id="fingerGradient" x1="1" x2="1" y1="0" y2="1" >
            <stop offset="0%" stop-color="#BD7676" />
            <stop offset="50%" stop-color="#ffb6b6ff" />
            <stop offset="100%" stop-color="#BD7676" />
        </linearGradient>
        <radialGradient id="roundTipGradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
            <stop offset="0%" stop-color="#ffb6b6ff" />
            <stop offset="100%" stop-color="#BD7676" />
        </radialGradient>
        <!-- Make a radial gradient for the pinky -->
        <path id="phalange" 
            d="
                M 0 0 
                L 10 0
                L 10 10
                L 0 10
                Z" 
            stroke-width="useCurrent" stroke="useCurrent" />
        <path id="tip" 
            d="
                M 0 0 
                C 15 0, 15 10, 0 10
                L 0 10
                Z" 
            stroke-width="useCurrent" stroke="useCurrent" />
        <circrle id="round-tip" cx="0" cy="5" r="5" fill="url('#roundTipGradient')"/> 
        <polygon id="start" points="1,1 6,5 1,9" fill="#0F0F" z-index="1010"/>
        <rect id="start-stop" y="1" x="6" width="3" height="8" fill="#000F" z-index="1000"/>
        <rect id="stop" y="1" width="8" height="8" fill="#000F" z-index="1000"/>
        <circle id="dot" cx="3" cy="5" r="2" stroke="none"/>
        <g id="pause">
            <rect id="pause-1" x="1" y="1" width="2" height="8" fill="#000F" z-index="1000"/>
            <rect id="pause-2" x="5" y="1" width="2" height="8" fill="#000F" z-index="1000"/>
        </g>
        <g id="chord-phrase-hand" viewBox="0 0 63 50" x="0" y="0" >
            <g id="thumb" > 
                <use id="me" href="#phalange" transform="translate(0,0)"></use>
                <use id="mf" href="#phalange" transform="translate(10,0)" />
                <use id="pf" href="#tip" transform="translate(20,0) scale(1,1) skewY(-12)"/>
            </g>
            <g id="index" transform="translate(0,10)"> 
                <use id="me" href="#phalange" transform="translate(0,0) scale(2,1)"/>
                <use id="mf" href="#phalange" transform="translate(20,0) scale(2,1) "/>
                <use id="pf" href="#tip" transform="translate(40,0) scale(1.5,1) "/>
            </g>
            <g id="middle" transform="translate(0,20)"> 
                <use id="me" href="#phalange" transform="translate(0,0) scale(2,1) "/>
                <use id="mf" href="#phalange" transform="translate(20,0) scale(2.25,1) "/>
                <use id="pf" href="#tip" transform="translate(42.5,0) scale(1.75,1) "/>
            </g>
            <g id="ring" transform="translate(0,30)"> 
                <use id="me" href="#phalange" transform="translate(0,0) scale(2,1) "/>
                <use id="mf" href="#phalange" transform="translate(20,0) scale(2,1) "/>
                <use id="pf" href="#tip" transform="translate(40,0) scale(1.5,1) "/>
            </g>
            <g id="pinky" transform="translate(0,40)"> 
                <use id="me" href="#phalange" transform="translate(0,0) scale(1.5,1) "/>
                <use id="mf" href="#phalange" transform="translate(15,0) scale(1.5,1) "/>
                <use id="pf" href="#tip" transform="translate(30,0) scale(1.5,1) "/>
            </g>
        </g>
    </defs> 
</svg>