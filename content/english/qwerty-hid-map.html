<html>
<head>
    <!-- Create an SVG element -->
    <style>
        @import url('https://fonts.cdnfonts.com/css/fira-mono');
    </style>
    <style>
        #hand g use {
            stroke: #aa6e02 ;
            stroke-width: 0.1px;
        }
        #thumb {
            fill: url("#thumbGradient");
        }
        #index {
            fill: #ffb6b6ff;
        }
        #middle {
            fill: #ffb6b6ff;
        }
        #ring {
            fill: #ffb6b6ff;
        }
        #pinky {
            fill: #ffb6b6ff;
        }
        .skin {
            fill: #ffb6b6ff;
        }
        .mono {
            font-family: 'Fira Mono', monospace;
            color: #00F;
            fill: #00F;
            font-weight: 500;
        }
    </style>
                
</head>
<body>
    <template id="keyTemplate">
        <div id="keyDiv">
            <div id="keyCaps"></div>
            <div id="keyText"></div>
            <div id="keyChord"></div>
        </div>
    </template>
    <svg xmlns="http://www.w3.org/2000/svg" 
        id="hexagon-action-profile"
        viewBox="-0 0 2000 500" 
        fill="none"  
        xmlns:v="https://vecta.io/nano">

        <defs>
            <path id="h" d="M 0 0 L 600 0" stroke-width="1px" stroke="#AAA"/>
            <path id="v" d="M 0 0 L 0 600" stroke-width="1px" stroke="#AAA"/>
        </defs>
        <use href="#h" transform="translate(0,100)"/>
        <use href="#h" transform="translate(0,200)"/>
        <use href="#h" transform="translate(0,300)"/>
        <use href="#h" transform="translate(0,400)"/>
        <use href="#h" transform="translate(0,500)"/>
        <use href="#v" transform="translate(100,0)"/>
        <use href="#v" transform="translate(200,0)"/>
        <use href="#v" transform="translate(300,0)"/>
        <use href="#v" transform="translate(400,0)"/>
        <use href="#v" transform="translate(500,0)"/>
        <path 
            id="hexagon-fill"
            d="
                M 0,5 
                L 8.66,0
                L 17.32,5
                L 17.32,15
                L 17.32,22
                L 21,26
                L 11,29
                L 0,28
                Z"
            transform="translate(275,110) scale(11.8,11.8) rotate(2.0)" 
            fill="black"
            stroke-width="0.7px" 
            stroke-linejoin="round" 
            stroke-linecap="round" 
            stroke="#000"/>
        <path 
            id="hand" 
            d="
            M 0,620 
            C 11,373 11,216 30,193 
            C 55,176 89,162 130,142 
            C 225,61 322,13 356,3 
            C 448,29 515,93 547,121 
            c 21,120 -8,89 6,186 
            c -88,38 -84,-89 -72,-159 
            c -1,26 -109,-31 -106,-50 
            c 11,16 -102,75 -102,75 
            c 0,0 -25,136 -40,128 
            c 39,38 90,110 106,141 
            c 61,27 222,-60 243,1
            c 0,0 20,70 -190,110
            " stroke="#dd9933" 
            stroke-width="5px" 
            stroke-linejoin="round" 
            fill="#ffb6b6ff" />
        <path 
            id="hexagon"
            d="
                M 0,15
                L 0,5 
                L 8.66,0
                L 17.32,5
                L 17.32,15
                "
            transform="translate(275,110) scale(11.8,11.8) rotate(2.0)" 
            fill="#000"
            stroke-width="2px" 
            stroke-linecap="round" 
            stroke-linejoin="round" 
            stroke="#080"/>
    </svg>
    <svg id="actionSVG" viewBox="0 0 100 29" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <marker id="arrowhead" 
                markerWidth="10" 
                markerHeight="7"
                refX="0" 
                refY="3.5" 
                orient="auto-start-reverse">
                <polygon points="0 0, 10 3.5, 0 7" />
            </marker>
        </defs>
        <g>
            <path id="fingerActions"
                d="
                    M 0 7 
                    c 10 -4, 14 -3, 15 -3
                    c 13 2, 13 2, 15 3
                    c 13 -2, 11 0, 13 -1
                    c 13 -2, 11 0, 13 -1
                    c 8 1, 9 4, 8 4
                    c -5 6, -8 5, -10 5
                    c -20 6, -22 7, -25 5
                    c -10 2, -17 7, -29 5
                    Z"
                stroke-width="0.3" stroke="black" class="skin" />
            <text id="fingerText" 
                text-anchor="middle" 
                class="mono" 
                x="15" y="16" 
                font-size="2" fill="black">THUMB</text>
        </g>
        <g>
            <path id="pullAction"
                d="
                    M 7 2.5 
                    a 8 8 0 0 1 10 0
                    " 
                stroke-width="0.3" 
                marker-start="url(#arrowhead)"
                stroke="black" fill="none"/>
            <text id="pullChord" 
                text-anchor="middle" 
                class="mono" 
                x="12" y="3" font-size="2" fill="black">0xA</text>
            <text id="pullText" text-anchor="middle" 
                class="mono" 
                x="12" 
                y="7" font-size="2" fill="black">Pull</text>
        </g>
        <g>
            <path id="graspAction"
                d="
                    M 25 22.5 
                    a 8 8 0 0 0 10 0
                    " 
                stroke-width="0.3" 
                marker-start="url(#arrowhead)"
                stroke="black" fill="none"/>
            <text id="pullChord" 
                text-anchor="middle" 
                class="mono" 
                x="30" y="23" font-size="2" fill="black">0x5</text>
            <text id="pullText" text-anchor="middle" 
                class="mono" 
                x="30" 
                y="26" font-size="2" fill="black">Grasp</text>
        </g>
        <g>
            <path id="pinchAction"
                d="
                    M 50 18 
                    a 8 8 0 0 0 10 0
                    " 
                stroke-width="0.3" 
                marker-start="url(#arrowhead)"
                stroke="black" fill="none"/>
            <text id="pullChord" 
                text-anchor="middle" 
                class="mono" 
                x="55" y="18" font-size="2" fill="black">0x0</text>
            <text id="pullText" text-anchor="middle" 
                class="mono" 
                x="55" 
                y="22" font-size="2" fill="black">Pinch</text>
        </g>
    </svg>
    <svg id="glyphSVG" viewBox="0 0 130 53" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <path id="phalange" 
                d="
                    M 0 0 
                    L 10 0
                    L 10 10
                    L 0 10
                    Z" 
                stroke-width="useCurrent" stroke="useCurrent" />
            <path id="tip" 
                d="
                    M 0 0 
                    C 15 0, 15 10, 0 10
                    L 0 10
                    Z" 
                stroke-width="useCurrent" stroke="useCurrent" />
            </defs>
            <text id="chordText" 
                text-anchor="middle" 
                class="mono" x="5" y="5" font-size="2" fill="black">0xA</text>
        <g id="thumb" > 
            <use id="me" href="#phalange" transform="translate(0,0)"></use>
            <text id="meChord" text-anchor="middle" class="mono" x="5" y="5" font-size="2" fill="black">0xA</text>
            <use id="mf" href="#phalange" transform="translate(10,0)" />
            <text id="mfChord" text-anchor="middle" class="mono" x="15" y="5" font-size="2" fill="black">0x5</text>
            <use id="pf" href="#tip" transform="translate(20,0) scale(1,1) skewY(-12)"/>
            <text id="mfChord" text-anchor="middle" class="mono" x="25" y="5" font-size="2" fill="black">0x0</text>
        </g>
        <g id="index" transform="translate(0,10)"> 
            <use id="me" href="#phalange" transform="translate(0,0) scale(2,1)"/>
            <text id="meChord" text-anchor="middle" class="mono" x="5" y="5" font-size="2" fill="black">0xB</text>
            <use id="mf" href="#phalange" transform="translate(20,0) scale(2,1) "/>
            <text id="meChord" text-anchor="middle" class="mono" x="25" y="5" font-size="2" fill="black">0x6</text>
            <use id="pf" href="#tip" transform="translate(40,0) scale(1.5,1) "/>
            <text id="meChord" text-anchor="middle" class="mono" x="45" y="5" font-size="2" fill="black">0x1</text>
        </g>
        <g id="middle" transform="translate(0,20)"> 
            <use id="me" href="#phalange" transform="translate(0,0) scale(2,1) "/>
            <text id="meChord" text-anchor="middle" class="mono" x="5" y="5" font-size="2" fill="black">0xC</text>
            <use id="mf" href="#phalange" transform="translate(20,0) scale(2.25,1) "/>
            <text id="meChord" text-anchor="middle" class="mono" x="25" y="5" font-size="2" fill="black">0x7</text>
            <use id="pf" href="#tip" transform="translate(42.5,0) scale(1.75,1) "/>
            <text id="meChord" text-anchor="middle" class="mono" x="45" y="5" font-size="2" fill="black">0x2</text>
        </g>
        <g id="ring" transform="translate(0,30)"> 
            <use id="me" href="#phalange" transform="translate(0,0) scale(2,1) "/>
            <text id="meChord" text-anchor="middle" class="mono" x="5" y="5" font-size="2" fill="black">0xD</text>
            <use id="mf" href="#phalange" transform="translate(20,0) scale(2,1) "/>
            <text id="meChord" text-anchor="middle" class="mono" x="25" y="5" font-size="2" fill="black">0x8</text>
            <use id="pf" href="#tip" transform="translate(40,0) scale(1.5,1) "/>
            <text id="meChord" text-anchor="middle" class="mono" x="45" y="5" font-size="2" fill="black">0x3</text>
        </g>
        <g id="pinky" transform="translate(0,40)"> 
            <use id="me" href="#phalange" transform="translate(0,0) scale(1.5,1) "/>
            <text id="meChord" text-anchor="middle" class="mono" x="5" y="5" font-size="2" fill="black">0xE</text>
            <use id="mf" href="#phalange" transform="translate(15,0) scale(1.5,1) "/>
            <text id="meChord" text-anchor="middle" class="mono" x="20" y="5" font-size="2" fill="black">0x9</text>
            <use id="pf" href="#tip" transform="translate(30,0) scale(1.5,1) "/>
            <text id="meChord" text-anchor="middle" class="mono" x="35" y="5" font-size="2" fill="black">0x4</text>
        </g>
    </svg>
    <svg id="keyboardSVG" viewBox="0 0 100 70" xmlns="http://www.w3.org/2000/svg">
        <rect x="0" y="0" width="100" height="70" fill="black" />
        <defs>
            <g id="Qkey">
                <rect id="keyRect" width="5" height="5" stroke="red" stroke-width="0.1" rx="0.5" ry="0.5" fill="white"/>
                <text id="keyCaps" text-anchor="start" x="2" y="2" font-size="2" fill="black"></text>
                <text id="keyText" text-anchor="start" x="2" y="4" font-size="2" fill="black"></text>
                <text id="keyChord" text-anchor="start" x="2" y="8" font-size="1.2" class="mono"></text>
            </g>
            <linearGradient id="thumbGradient" x1="1" x2="1" y1="0" y2="1" >
                <stop offset="0%" stop-color="#ffb6b6ff" />
                <stop offset="100%" stop-color="#BD7676" />
            </linearGradient>
            <linearGradient id="fingerGradient" x1="1" x2="1" y1="0" y2="1" >
                <stop offset="0%" stop-color="#BD7676" />
                <stop offset="50%" stop-color="#ffb6b6ff" />
                <stop offset="100%" stop-color="#BD7676" />
            </linearGradient>
            <radialGradient id="roundTipGradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                <stop offset="0%" stop-color="#ffb6b6ff" />
                <stop offset="100%" stop-color="#BD7676" />
            </radialGradient>
        </defs>
    </svg>
    <script>
        var svgNS = 'http://www.w3.org/2000/svg';
        var svg = document.getElementById("keyboardSVG");
        const colWidth = 5.7;
        const rowHeight = 11;
        const colPadding = 0.5;
        const rowPadding = colPadding;
        function setKeyDiv(key, x, y, width, appendTo=document.body){
            var keyDiv = document.getElementById("keyTemplate").content.cloneNode(true).getElementById("keyDiv");
            keyDiv.style.left = x + "px";
            keyDiv.style.top = y + "px";
            keyDiv.style.width = width + "px";
            if(key.caps){
                keyDiv.children["keyCaps"].textContent = key.caps;
            } else {
                // keyDiv.children[0].children["keyCaps"].remove();
            }
            keyDiv.children["keyText"].textContent = key.key;
            if(key.chord){
                keyDiv.children["keyChord"].textContent = key.chord;
            } else {
                // keyDiv.children[0].children["keyChord"].remove();
            }
            appendTo.appendChild(keyDiv);
        }
        function setKeySvg(key, x, y, width, appendTo=svg){
            var qKey = document.getElementById("Qkey").cloneNode(true);
            qKey.children["keyRect"].setAttribute("x", x);
            qKey.children["keyRect"].setAttribute("y", y);
            qKey.children["keyRect"].setAttribute("width", width);
            qKey.children["keyRect"].setAttribute("height", rowHeight);
            if(key.caps){
                qKey.children["keyCaps"].textContent = key.caps;
                qKey.children["keyCaps"].setAttribute("x", x + 1);
                qKey.children["keyCaps"].setAttribute("y", y + 2);
                qKey.children["keyText"].setAttribute("y", y + 4);
            } else {
                qKey.children["keyCaps"].remove();
                qKey.children["keyText"].setAttribute("y", y + 2);
            }
            qKey.children["keyText"].textContent = key.key;
            qKey.children["keyText"].setAttribute("x", x + 1);
            if(key.chord || key.chord === 0x0){
                let chordHex = key.chord.toString(16).toUpperCase();
                let chordImage = document.createElementNS(svgNS, "image");
                chordImage.setAttribute("href", `https://handex.io/images/svgs/${chordHex}.svg`);
                chordImage.setAttribute("x", x + 0.5);
                chordImage.setAttribute("y", y + 2);
                chordImage.setAttribute("width", colWidth - 1);
                chordImage.setAttribute("height", rowHeight - 1);
                qKey.appendChild(chordImage);
                qKey.children["keyChord"].textContent = `0x${chordHex}`;
                qKey.children["keyChord"].setAttribute("x", x + 0.5);
                qKey.children["keyChord"].setAttribute("y", y + rowHeight - 0.5);
                // TODO: Add chord-svg image url.
            } else {
                qKey.children["keyChord"].remove();
            }
            appendTo.appendChild(qKey);
        }
        const rowsOfKeys = [
            [
                { key: "Esc", xScale: 1, chord: 0x49 },
                { key: "F1", xScale: 0.9, chord: 0x131 },
                { key: "F2", xScale: 0.9, chord: 0x1D },
                { key: "F3", xScale: 0.9, chord: 0x370 },
                { key: "F4", xScale: 0.9, chord: 0xB0 },
                { key: "F5", xScale: 0.9, chord: 0x1C },
                { key: "F6", xScale: 0.9, chord: 0xB06 },
                { key: "F7", xScale: 0.9, chord: 0xB1 },
                { key: "F8", xScale: 0.9, chord: 0xB7 },
                { key: "F9", xScale: 0.9, chord: 0xB2 },
                { key: "F10", xScale: 0.9, chord: 0xBC },
                { key: "F11", xScale: 0.9, chord: 0xB8 },
                { key: "F12", xScale: 0.9, chord: 0xB3B },
                { key: "PrtSc", xScale: 1, chord: 0xBD },
                { key: "Scroll", xScale: 1, chord: 0x7E7 },
                { key: "Pause", xScale: 1, chord: 0x206 },
            ],
            [
                { key:"`", xScale: 1 , caps: "~", chord: 0x101 },
                { key: "1", xScale: 1, caps: "!", chord: 0x10 },
                { key: "2", xScale: 1, caps: "@", chord: 0x20 },
                { key: "3", xScale: 1, caps: "#", chord: 0x30 },
                { key: "4", xScale: 1, caps: "$", chord: 0x40 },
                { key: "5", xScale: 1, caps: "%", chord: 0x50 },
                { key: "6", xScale: 1, caps: "^", chord: 0x60 },
                { key: "7", xScale: 1, caps: "&", chord: 0x70 },
                { key: "8", xScale: 1, caps: "*", chord: 0x80 },
                { key: "9", xScale: 1, caps: "(", chord: 0x90 },
                { key: "0", xScale: 1, caps: ")", chord: 0xA0 },
                { key: "-", xScale: 1, caps: "_", chord: 0xB0 },
                { key: "=", xScale: 1, caps: "+", chord: 0xC0},
                { key: "Backspace", xScale: 2, chord: 0xD0 },
            ],
            [
                { key: "Tab", xScale: 1.3, chord: 0x94 },
                { key: "Q", xScale: 1, chord:0x43 },
                { key: "W", xScale: 1, chord: 0x34 },
                { key: "E", xScale: 1, chord: 0x32 },
                { key: "R", xScale: 1, chord: 0x12 },
                { key: "T", xScale: 1, chord: 0x16 },
                { key: "Y", xScale: 1, chord: 0x71 },
                { key: "U", xScale: 1, chord: 0x61 },
                { key: "I", xScale: 1, chord: 0x78 },
                { key: "O", xScale: 1, chord: 0x87 },
                { key: "P", xScale: 1, chord: 0x98 },
                { key: "[", xScale: 1, caps: "{", chord: 0x45 },
                { key: "]", xScale: 1, caps: "}", chord: 0x495 },
                { key: "\\", xScale: 1.7, caps: "|", chord: 0x15 },
            ], [
                { key: "Caps", xScale: 1.4, chord: 0xE },
                { key: "A", xScale: 1, chord: 0x4 },
                { key: "S", xScale: 1, chord: 0x3 },
                { key: "D", xScale: 1, chord: 0x2 },
                { key: "F", xScale: 1, chord: 0x1 },
                { key: "G", xScale: 1, chord: 0x21 },
                { key: "H", xScale: 1, chord: 0x76 },
                { key: "J", xScale: 1, chord: 0x6 },
                { key: "K", xScale: 1, chord: 0x7 },
                { key: "L", xScale: 1, chord: 0x8 },
                { key: ";", xScale: 1, caps: ":", chord: 0x9 },
                { key: "'", xScale: 1, caps: '"', chord: 0x89 },
                { key: "Enter", xScale: 2.7, chord: 0xA },
            ],[
                { key: "Shift", xScale: 2, chord: 0x5 },
                { key: "Z", xScale: 1, chord: 0x24 },
                { key: "X", xScale: 1, chord: 0x23 },
                { key: "C", xScale: 1, chord: 0x14 },
                { key: "V", xScale: 1, chord: 0x13 },
                { key: "B", xScale: 1, chord: 0x31 },
                { key: "N", xScale: 1, chord: 0x68 },
                { key: "M", xScale: 1, chord: 0x69 },
                { key: ",", xScale: 1, caps: "<", chord: 0x79 },
                { key: ".", xScale: 1, caps: ">", chord: 0x97 },
                { key: "/", xScale: 1, caps: "?", chord: 0x96 },
                { key: "Shift", xScale: 3.2, chord: 0x5 },
            ],[
                { key: "Ctrl", xScale: 1.3, chord: 0x5 },
                { key: "Win", xScale: 1 },
                { key: "Alt", xScale: 1, chord: 0xA },
                { key: "Space", xScale: 5, chord: 0x0 },
                { key: "Menu", xScale: 1 },
                { key: "<", xScale: 1, chord: 0x75 },
                { key: "v", xScale: 1, chord: 0x74 },
                { key: "^", xScale: 1, chord: 0x73 },
                { key: ">", xScale: 1, chord: 0x72 }, 
            ]

        ];
        let y = 0;
        rowsOfKeys.forEach((row, rowIndex) => {
            let x = 0;
            row.forEach((key) => {
                let width = key.xScale * colWidth;
                setKeySvg(key, x, y, width);
                x += width + colPadding;
            });
            y += rowHeight + rowPadding;
        });

        // document.body.appendChild(svg);
    </script>
</body>
</html>